#!/usr/bin/env bash
# Display all active IPv4 IPs of the machine

PATH="/usr/sbin:/sbin:$PATH"

if command -v ip >/dev/null 2>&1; then
  ips="$(ip -4 -o addr show 2>/dev/null | awk '{print $4}' | cut -d/ -f1)"
fi

if [ -z "${ips:-}" ] && command -v ifconfig >/dev/null 2>&1; then
  ips="$(ifconfig 2>/dev/null \
    | grep -Eo 'inet (addr:)?([0-9]{1,3}\.){3}[0-9]{1,3}' \
    | sed -E 's/^inet (addr:)?//')"
fi

if [ -z "${ips:-}" ] && command -v hostname >/dev/null 2>&1; then
  ips="$(hostname -I 2>/dev/null \
    | tr -s ' ' '\n' \
    | grep -E '^[0-9]{1,3}(\.[0-9]{1,3}){3}$' || true)"
fi

if [ -n "${ips:-}" ]; then
  printf '%s\n' "$ips"
fi
